/*!CK:2853349868!*//*1453425718,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["tB5DD"]); }

__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['ReactComposerAttachmentType','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','csx','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();function v(w){this.$ReactFeedComposerX1=w.root;this.$ReactFeedComposerX2=w.composerID;this.$ReactFeedComposerX3=w.targetID;this.$ReactFeedComposerX4=w.composerType;this.$ReactFeedComposerX5=w.friendListID;this.$ReactFeedComposerX6=false;this.$ReactFeedComposerX7=m.find(this.$ReactFeedComposerX1,'form');this.$ReactFeedComposerX8=m.find(this.$ReactFeedComposerX1,"._3en1");this.$ReactFeedComposerX9=new p();this.$ReactFeedComposerX9.addSubscriptions(n.listen(this.$ReactFeedComposerX1,'click',this.$ReactFeedComposerX10.bind(this)),n.listen(this.$ReactFeedComposerX1,'mouseover',this.$ReactFeedComposerX10.bind(this)),n.listen(this.$ReactFeedComposerX8,'keydown',this.$ReactFeedComposerX10.bind(this)),n.listen(this.$ReactFeedComposerX7,'success',this.$ReactFeedComposerX11.bind(this)),i.subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX12.bind(this)));var x=m.find(this.$ReactFeedComposerX1,"._4d6h"),y=m.scry(x,'input[name="composer_photo[]"]')[0];if(y){this.$ReactFeedComposerX9.addSubscriptions(n.listen(y,'click',this.$ReactFeedComposerX10.bind(this)),n.listen(y,'change',this.$ReactFeedComposerX10.bind(this)));if(y.files&&y.files.length>0)this.$ReactFeedComposerX10();}this.$ReactFeedComposerX13=m.scry(this.$ReactFeedComposerX1,"._5qtm");this.$ReactFeedComposerX13.forEach((function(z){return this.$ReactFeedComposerX9.addSubscriptions(n.listen(z,'click',this.$ReactFeedComposerX14.bind(this)));}).bind(this));o.onLeave(this.$ReactFeedComposerX12.bind(this));}v.prototype.$ReactFeedComposerX14=function(w){var x=w.getTarget(),y=null;while(x){if(x.nodeType===1&&x.nodeName==='A'){y=x;break;}x=x.parentNode;}!(y!==null)?u(0):undefined;var z=l.hasClass(y,"._5qtn");if(z)return;this.$ReactFeedComposerX13.forEach(function(ca){return l.removeClass(ca,"_5qtn");});l.addClass(y,"_5qtn");var aa=m.find(this.$ReactFeedComposerX1,"._559p"),ba=m.find(this.$ReactFeedComposerX1,"._559q");switch(y.getAttribute('data-attachment-type')){case h.STATUS:l.hide(ba);l.show(aa);break;case h.MEDIA:case h.QANDA:l.show(ba);l.hide(aa);break;}};v.prototype.$ReactFeedComposerX10=function(w){if(this.$ReactFeedComposerX6)return;this.$ReactFeedComposerX6=true;var x=r.getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX3).setEnum('composer_type',this.$ReactFeedComposerX4).setString('friend_list_id',this.$ReactFeedComposerX5).getURI();new j(x).send();var y=q.getURIBuilder().setString('event','bootload_start').setEnum('composer_type',k.FEEDX).getURI();new j(y).send();};v.prototype.$ReactFeedComposerX12=function(){this.$ReactFeedComposerX9.release();};v.prototype.$ReactFeedComposerX11=function(){this.$ReactFeedComposerX8.value='';this.$ReactFeedComposerX12();};f.exports=v;},null);