/*!CK:3301684318!*//*1453857700,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gSO5o"]); }

__d('AdsGenericFilterOperatorConfigUtil',['AdsGenericFilterOperatorConfig','ex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l){for(var m in h){var n=h[m];if(l===n.operator)return n;}throw new Error(i('Invalid operator "%s"',l));}var k={getConfigByOperator:j};f.exports=k;},null);
__d('AdsGenericFilterValueConfigUtil',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){if(k)for(var l in j){var m=j[l];if(m.value===k)return m;}return null;}var i={getConfigByValue:h};f.exports=i;},null);
__d('AdsGenericFilterValueTextUtil',['AdsGenericFilterValueConfigUtil','AdsGenericFilterOperator','intlList','invariant'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=function(q){return q;};function m(q,r,s){var t=q.value,u='',v=r.valueRenderer||l;if(typeof t==='string'||typeof t==='number'){u=n(s,t,v);}else if(r.valueSetRenderer){u=r.valueSetRenderer(r.valueRenderer,r.values,t);}else if(Array.isArray(t)){u=o(s,t,v,q,!!r.applyOnly);}else k(0);return u;}function n(q,r,s){var t=h.getConfigByValue(q,r);return s(t?t.value:String(r));}function o(q,r,s,t,u){var v='';if(u){v=String(r.length);}else{r=r.map(function(w){return n(q,w,s);});switch(t.operator){case i.IN_RANGE:case i.NOT_IN_RANGE:v=r.join(' - ');break;case i.ALL:v=j(r,j.CONJUNCTIONS.AND);break;case i.NONE:v=j(r,j.CONJUNCTIONS.NONE);break;default:v=j(r,j.CONJUNCTIONS.OR);}}return v;}var p={getValueText:m};f.exports=p;},null);
__d('AdsCMSaveFilterSetDialog.react',['LayerHideOnEscape','LayerFadeOnHide','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUITextInput.react','cx','fbt','trim'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=j.PropTypes,u=j.createClass({displayName:'AdsCMSaveFilterSetDialog',propTypes:{onSave:t.func.isRequired},getInitialState:function(){return {name:''};},componentDidMount:function(){this.refs.filterSetName.focusInput();},render:function(){return (j.createElement(k,{behaviors:{LayerHideOnEscape:h,LayerFadeOnHide:i},ref:'dialog',shown:true,width:450},j.createElement(o,null,r._("Save Filter")),j.createElement(l,null,j.createElement('div',{className:"_24ec"},r._("You can save this filter to use again later.")),j.createElement(p,{className:"_5mjr",maxLength:128,placeholder:r._("Enter a name for your saved filter..."),ref:'filterSetName',onChange:(function(event){this.setState({name:s(event.target.value,' ')});}).bind(this),onEnter:(function(){if(this.state.name)this._saveCurrentFilterSet();}).bind(this),onEsc:(function(){this.refs.dialog.layer.hide();}).bind(this)})),j.createElement(n,null,j.createElement(m,{action:'cancel',label:r._("Cancel"),use:'default'}),j.createElement(m,{disabled:!this.state.name,label:r._("Save"),use:'confirm',onClick:this._saveCurrentFilterSet}))));},_saveCurrentFilterSet:function(){this.props.onSave(this.state.name);this.refs.dialog.layer.hide();}});f.exports=u;},null);
__d('XUISingleSelector.react',['Image.react','InlineBlock.react','React','ReactDOM','ReactSelectorUtils','ReactXUIMenu','SingleSelectorBase','SubscriptionsHandler','XUIPopoverButton.react','areEqual','cloneWithProps_DEPRECATED','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=j.PropTypes,u=m.SelectableMenu,v=m.SelectableItem,w=j.createClass({displayName:'XUISingleSelectorButton',render:function(){return (j.createElement(p,babelHelpers._extends({},this.props,{chevron:j.createElement(h,{src:s('/images/ui/x/selector/chevron.png')})})));}}),x=j.createClass({displayName:'XUISingleSelector',propTypes:{name:t.string,maxheight:t.number,maxwidth:t.number,defaultValue:t.string,disabled:t.bool,size:t.oneOf(['small','medium','large','xlarge','xxlarge']),suppressed:t.bool,value:t.any,onChange:t.func,onShow:t.func,onHide:t.func,behaviors:t.array},_menu:null,_singleSelector:null,_subscriptions:null,flattenMenuItems:function(){var y=[];j.Children.forEach(this.props.children,function(z){if(z)y.push(z);});return y;},processMenuItems:function(){return l.processMenuItems(this.flattenMenuItems(),this.getValue());},setMenuValue:function(y){this._singleSelector.setValueWithoutChange(y);},getDefaultProps:function(){return {disabled:false,size:'medium'};},getInitialState:function(){return {value:this.props.value!==undefined?this.props.value:this.props.defaultValue!==undefined?this.props.defaultValue:this.flattenMenuItems()[0].props.value};},componentWillReceiveProps:function(){if(this.props.value!==undefined)this.setState({value:this.props.value});},componentDidMount:function(){var y=k.findDOMNode(this.refs.button);this._singleSelector=new n(y,this._createMenu(),{disabled:this.props.disabled},{behaviors:this.props.behaviors});this._subscriptions=new o();this._subscriptions.addSubscriptions(this._singleSelector.subscribe('change',this.onChange));if(this.props.onShow)this._subscriptions.addSubscriptions(this._singleSelector.subscribe('show',this.props.onShow));if(this.props.onHide)this._subscriptions.addSubscriptions(this._singleSelector.subscribe('hide',this.props.onHide));},componentDidUpdate:function(y){if(!q(y.children,this.props.children))this._singleSelector.setMenu(this._createMenu());if(y.disabled!==this.props.disabled)if(!this.props.disabled){this._singleSelector.enable();}else this._singleSelector.disable();this.setMenuValue(this.getValue());},componentWillUnmount:function(){this._singleSelector.destroy();if(this._subscriptions){this._subscriptions.release();this._subscriptions=null;}},getValue:function(){return this.props.value!==undefined?this.props.value:this.state.value;},onChange:function(y,z){if(this.props.value===undefined){this.setState({value:z.value});}else this.setMenuValue(this.props.value);if(this.props.onChange)this.props.onChange(z);},_createMenu:function(){var y=j.createElement(u,{maxheight:this.props.maxheight},this.processMenuItems().items);return new y.type(y.props);},render:function(){var y=this.processMenuItems().selectedItem,z;if(y.props.icon)z=r(y.props.icon,{});return (j.createElement(i,babelHelpers._extends({},this.props,{alignv:'middle'}),j.createElement('input',{type:'hidden',autoComplete:'off',name:this.props.name,value:y.props.value}),j.createElement(w,{disabled:this.props.disabled,image:z,label:y.props.label||y.props.children,maxwidth:this.props.maxwidth,ref:'button',size:this.props.size,suppressed:this.props.suppressed})));}});x.Option=v;f.exports=x;},null);
__d('AdsCurrencySingleSelector.react',['CurrencyConfig','React','ReactFragment','XUISingleSelector.react','fbt','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=k.Option,p=i.createClass({displayName:'AdsCurrencySingleSelector',propTypes:{className:n.string,maxHeight:n.number,onChange:n.func,value:n.string},getDefaultProps:function(){return {maxHeight:300};},statics:{getButtonSize:function(q){return q.size||'medium';}},render:function(){var q=j.create(m(h.adsCurrenciesByCode,function(r,s){return (i.createElement(o,{key:r.iso,value:r.iso},l._("{currency code} - {currency name}",[l.param('currency code',r.iso),l.param('currency name',r.name)])));}));return (i.createElement(k,{className:this.props.className,maxheight:this.props.maxHeight,value:this.props.value,onChange:this.props.onChange},q));}});f.exports=p;},null);
__d('AdsFilterChangeTypes',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={ADD_INPUT:'ADD_INPUT',ADD_PRESET:'ADD_PRESET',CLEAR:'CLEAR',CREATE_NEW:'CREATE_NEW',EDIT:'EDIT',REMOVE:'REMOVE',REMOVE_PRESET:'REMOVE_PRESET',SHOW_RECENTLY_CREATED_ON:'SHOW_RECENTLY_CREATED_ON',SHOW_RECENTLY_CREATED_OFF:'SHOW_RECENTLY_CREATED_OFF'};f.exports=h;},null);
__d('AdsNewIDs',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=0;function i(){var k=Date.now()+h;h++;return -k;}function j(k){return +k<0;}f.exports={isNewNegativeID:j,newNegativeID:i};},null);
__d('ProductSetField',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={ID:'id',FILTER:'filter',NAME:'name',PRODUCT_COUNT:'product_count'};f.exports=h;},null);
__d('AdsProductSetDataManager',['AdsBaseDataManager','AdsGraphAPI','AdsProductSetActions','ProductSetField','Map','adsGKCheck','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=[k.FILTER,k.NAME,k.PRODUCT_COUNT],r=q.filter(function(u){return u!==k.PRODUCT_COUNT;});o=babelHelpers.inherits(s,h);p=o&&o.prototype;s.prototype.loadAll=function(u){u.forEach((function(v){return this.load(v);}).bind(this));};s.prototype.load=function(u){i.get().object('product_set',u).batched().get({fields:q}).done(this.__handleSuccess.bind(this,['load'],u,null),this.__reloadWithoutProductSearch.bind(this,['load'],u,null));};s.prototype.__reloadWithoutProductSearch=function(u,v,w,x){i.get().object('product_set',v).batched().get({fields:r}).done(this.__handleSuccess.bind(this,u,v,w),this.__handleError.bind(this,u,v,w));};s.prototype.createProductSetsForProductCatalog=function(u,v,w){v.forEach((function(x){i.get().object('product_catalog',u).edge('product_sets').post(x).done((function(y){return this.__handleSuccess(['create'],x.tempID,null,babelHelpers._extends({},y,{productCatalogID:u,source:w}));}).bind(this),(function(y){y.productCatalogID=u;this.__handleError(['create'],x.tempID,null,y);}).bind(this));}).bind(this));};s.prototype.deleteProductSetsForProductCatalog=function(u,v){v.forEach((function(w){i.get().object('product_set',w).batched().remove().done((function(x){return this.__handleSuccess(['delete'],w,null,babelHelpers._extends({},x,{productCatalogID:u}));}).bind(this),(function(x){x.productCatalogID=u;this.__handleError(['delete'],w,null,x);}).bind(this));}).bind(this));};s.prototype.__onBatchDeleted=function(u){var v=u.values().next().value;v&&j.productSetBatchDeleted(v.productCatalogID);};s.prototype.__onBatchDeleteError=function(u){j.productSetBatchDeleteError(u);};s.prototype.__onBatchLoaded=function(u){j.productSetBatchLoaded(u);};s.prototype.__onBatchLoadError=function(u){j.productSetBatchLoadError(u);};s.prototype.__onBatchCreated=function(u){var v=u.values().next().value;v&&j.productSetBatchCreated(v.productCatalogID,v.id,v.source);};s.prototype.__onBatchCreateError=function(u){j.productSetBatchCreateError(u);};s.prototype.__getObjectTypeLabel=function(){return n._("Product Set");};function s(){o.apply(this,arguments);}var t=new s();f.exports=t;},null);
__d('AdsProductSetStore',['AdsBaseDataStore','AdsLoadState','AdsActionTypes','AdsProductSetDataManager'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.getDataManager=function(){return k;};n.prototype.__onDispatch=function(o){var p=o.action;switch(p.type){case j.PRODUCT_SET.BATCH_LOADED:this.__handleData(p.productSets,i.LOADED);break;case j.PRODUCT_SET.BATCH_DELETE_ERROR:case j.PRODUCT_SET.BATCH_LOAD_ERROR:this.__handleData(p.errors,i.ERROR);break;case j.PRODUCT_SET.BATCH_CREATE_ERROR:this.__handleData(p.errors,i.ERROR);break;case j.PRODUCT_SET.CREATE_BATCH:this.$AdsProductSetStore1(p.productCatalogID,p.objectsData,p.source);break;case j.PRODUCT_SET.DELETE_BATCH:this.$AdsProductSetStore2(p.productCatalogID,p.productSetIDs);break;}};n.prototype.$AdsProductSetStore2=function(o,p){k.deleteProductSetsForProductCatalog(o,p);};n.prototype.$AdsProductSetStore1=function(o,p,q){k.createProductSetsForProductCatalog(o,p,q);};function n(){l.apply(this,arguments);}f.exports=new n();},null);
__d('BUIFilterTokenInputHelper',['AdsGenericFilter','AdsGenericFilterFieldConfigUtil','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsGenericFilterOperatorConfigUtil','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=function(x){return x;},o={},p=[[k.GREATER_THAN,k.LESS_THAN,k.NOT_GREATER_THAN,k.NOT_LESS_THAN,k.EQUAL,k.NOT_EQUAL],[k.CONTAIN,k.NOT_CONTAIN],[k.IN_RANGE,k.NOT_IN_RANGE],[k.IN,k.NOT_IN],[k.BEFORE,k.AFTER],[k.ANY,k.ALL,k.NONE]];function q(x,y){if(x.name===y.name)return true;return x.type!==j.NUMBER_SET&&x.type!==j.STRING_SET&&x.type===y.type;}function r(x,y){if(x===y)return true;var z;if(x<y){z=x+','+y;}else z=y+','+x;if(z in o)return o[z];var aa,ba=false,ca=p.length;for(aa=0;aa<ca;aa++){var da=p[aa];if(da.indexOf(x)>-1&&da.indexOf(y)>-1){ba=true;break;}}o[z]=ba;return ba;}function s(x,y){var z=y.fieldConfig,aa=z?z.field.name:null,ba={},ca=[],da;if(!z&&x.defaultFilter){var ea=x.defaultFilter.field;z=i.getConfigByField(x.fieldsConfig,ea);aa=z.field.name;}if(x.filterBlacklist)x.filterBlacklist.forEach(function(fa){!(fa instanceof h)?m(0):undefined;ba[fa.field.name]=true;});x.validFieldConfigs.forEach(function(fa){var ga=fa.field.name;if(!ba[ga]){if(ga===aa)da=true;ca.push(fa);}});if(!da){z=ca[0];y.operatorConfig=undefined;}!z?m(0):undefined;y.fieldConfig=z;y.fieldConfigOptions=ca;y.fieldValueRenderer=z.valueRenderer||n;y.fieldValueParser=z.valueParser||n;}function t(x,y){var z=y.fieldConfig;!z?m(0):undefined;var aa=y.operatorConfig,ba=aa&&aa.operator,ca=[],da;if(!aa&&x.defaultFilter){ba=x.defaultFilter.operator;aa=l.getConfigByOperator(ba);}if(z)z.operators.forEach(function(ea){if(ea.operator===ba)da=true;ca.push(ea);});if(!da)aa=ca[0];y.operatorConfig=aa;y.operatorConfigOptions=ca;}function u(x,y){var z=y.fieldConfig,aa=y.value,ba=y.valueField,ca=y.valueOperator,da=v(z);if(aa===undefined&&x.defaultFilter){aa=x.defaultFilter.value;ba=x.defaultFilter.field;ca=x.defaultFilter.operator;}else if(z){var ea=y.operatorConfig.operator,fa=z.field;if(!ca||!ea||!r(ca,ea)||!q(ba,fa)){ca=ea;ba=fa;switch(ea){case k.EQUAL:case k.NOT_EQUAL:var ga=z.values;if(Array.isArray(ga)&&ga.length){aa=ga[0].value;}else aa=da;break;case k.IN_RANGE:case k.NOT_IN_RANGE:aa=[da,da];break;case k.IN:case k.NOT_IN:aa=[];break;case k.ANY:case k.ALL:case k.NONE:aa=[];break;default:aa=da;}}}else aa=da;y.value=aa;y.valueField=ba;y.valueOperator=ca;}function v(x){return x.field.type===j.DATE_RANGE?null:'';}var w={calibrateFieldState:s,calibrateOperatorState:t,calibrateValueState:u};f.exports=w;},null);
__d('BUIFilterTokenTextInput.react',['Keys','React','ReactDOM','ContextualDialog.react','ReactLayeredComponentMixin','cx','fbt','focusNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=i.PropTypes,q=/^-?\d+\.?\d*$/,r=i.createClass({displayName:'BUIFilterTokenTextInput',mixins:[l],propTypes:{format:p.oneOf(['string','number','currency']),label:p.string,shouldFocus:p.bool,value:p.string.isRequired,onChange:p.func.isRequired,onEnter:p.func,onEscape:p.func},getInitialState:function(){return {focused:false,tempValue:null,tooltip:null};},componentDidMount:function(){if(this.props.shouldFocus)this._focusNode();},componentWillReceiveProps:function(s){if(s.shouldFocus&&!this.state.focused)this._focusNode();},_focusNode:function(){setTimeout((function(){if(this.isMounted())o(j.findDOMNode(this.refs.input));}).bind(this),400);},renderLayers:function(){if(this.state.tooltip){return {layer:i.createElement(k,{contextRef:(function(){return this.refs.main;}).bind(this),shown:true,position:'above'},i.createElement('div',{className:"_48f_"},this.state.tooltip))};}else return null;},render:function(){var s=this._normalizeValue(this.props.value),t=this.props.placeholder||'',u="_48g0"+(this.state.focused?' '+"_48g1":''),v="_48g2"+(!!s?' '+"_48g3":'');return (i.createElement('div',{className:u,ref:'main'},i.createElement('div',{'aria-hidden':'true',className:"_48g4"},(s||'-').replace(/\s/g,'-')),i.createElement('div',{'aria-hidden':'true',className:"_48g5"},t.replace(/\s/g,'-')),i.createElement('div',{className:"_48g6"},i.createElement('input',{title:t,placeholder:t,onKeyDown:this._onKeyDown,onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onChange,className:v,type:'text',value:this.state.tempValue!==null?this.state.tempValue:s,ref:'input'}))));},_normalizeValue:function(s){if(this.props.format==='number'&&s)s=q.test(s)?s:'';return s;},_onKeyDown:function(event){if(event.keyCode===h.RETURN&&this.props.onEnter){this.props.onEnter(event);}else if(event.keyCode===h.ESC&&this.props.onEscape)this.props.onEscape(event);},_onChange:function(event){var s=event.target.value,t=this._normalizeValue(s);if(s!==t){event.preventDefault();if(this.props.format==='number'&&this.state.tooltip===null)this.setState({tooltip:n._("Please enter numbers only")});return;}if(this.state.tooltip)this.setState({tooltip:null});if(this.props.format==='currency')this.setState({tempValue:t});this.props.onChange(t);},_onFocus:function(){this.setState({focused:true});},_onBlur:function(event){var s={focused:false,tooltip:null};if(this.props.format==='currency')s.tempValue=null;this.setState(s);}});f.exports=r;},null);
__d('BUIFilterTokenTextSetSelector.react',['AdsCFCheckbox.react','ContextualLayer.react','LayerHideOnBlur','React','ReactChildren','ReactLayeredComponentMixin','XUIButton.react','cx','fbt','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=k.PropTypes,t=k.createClass({displayName:'BUIFilterTokenTextSetSelector',mixins:[m],propTypes:{onChange:s.func.isRequired},getInitialState:function(){return {showMenu:false};},render:function(){var u=[];l.forEach(this.props.children,function(x){!(x&&x.type===t.Option)?q(0):undefined;if(x.props.checked)u.push(x.props.text);});var v=u.length?u.join(', '):p._("choose from..."),w=r("_25sl",this.props.className);return (k.createElement(n,{use:'default',className:w,ref:'menuOpener',onClick:this._onMenuToggle,label:v,suppressed:true}));},renderLayers:function(){if(this.state.showMenu){var u=l.map(this.props.children,(function(v,w){return k.cloneElement(v,{optionName:'option_'+w,onOptionChange:this._onOptionChange});}).bind(this));return {layer:k.createElement(i,{key:'menu',onToggle:this._onMenuToggle,behaviors:{LayerHideOnBlur:j},contextRef:(function(){return this.refs.menuOpener;}).bind(this),position:'below',shown:this.state.showMenu},k.createElement('div',{className:"_25sp",role:'menu'},u))};}else return null;},_onMenuToggle:function(){this.setState({showMenu:!this.state.showMenu});},_onOptionChange:function(u,v,w){var x=[];l.forEach(this.props.children,function(y,z){var aa='option_'+z;if(aa===v){if(u)x.push(y.props.value);}else if(y.props.checked)x.push(y.props.value);});this.props.onChange(x);}});t.Option=k.createClass({displayName:'Option',propTypes:{checked:s.bool.isRequired,text:s.string.isRequired,value:s.oneOfType([s.string,s.number,s.object])},render:function(){return (k.createElement('div',{className:"_25sq",'aria-selected':this.props.checked},k.createElement(h,{name:this.props.optionName,onChange:this.props.onOptionChange,checked:this.props.checked,value:this.props.value,label:this.props.text})));}});f.exports=t;},null);
__d('BUIFilterTokenInput.react',['AdsGenericFilter','AdsGenericFilterFieldConfigUtil','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsHelpLink.react','BUIFilterTokenInputHelper','BUIFilterTokenTextInput.react','BUIFilterTokenTextSetSelector.react','DOM','Event','FBDate','Image.react','Parent','React','ReactDOM','Rect','Timezone','XUIButton.react','XUICloseButton.react','XUIDatePicker.react','XUIDateRangePicker.react','XUISelector.react','XUISpinner.react','XUIMenuStaticItem.react','XUISelectorButton.react','csx','cx','fbt','glyph','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){'use strict';if(c.__markCompiled)c.__markCompiled();var ma=ca.Option,na=u.PropTypes,oa=o.Option,pa=u.createClass({displayName:'BUIFilterTokenInput',propTypes:{autoOpenFieldSelector:na.bool,defaultFilter:na.instanceOf(h),filterBlacklist:na.array,onSubmit:na.func.isRequired,onCancel:na.func,validFieldConfigs:na.array.isRequired,fieldsConfig:na.object.isRequired,timezoneID:na.number,applyOnly:na.bool.isRequired,dismissOnBlur:na.bool.isRequired,hideMenuOnSingleItem:na.bool,disableFieldSelector:na.bool},getDefaultProps:function(){return {applyOnly:false,autoOpenFieldSelector:false,dismissOnBlur:true};},componentDidMount:function(){this._setClickHandlerDelay=setTimeout(this._setClickHandler,16);if(this.props.autoOpenFieldSelector&&!this.props.applyOnly)this._autoOpenMenuDelay=setTimeout(this._autoOpenMenu,200);},componentWillUnmount:function(){clearTimeout(this._setClickHandlerDelay);clearTimeout(this._autoOpenMenuDelay);this._unsetClickHandler();},getInitialState:function(){return this._calibrateState(this.props,{shouldFocusInput:!this.props.applyOnly});},componentWillReceiveProps:function(ra){if(String(ra.defaultFilter)!==String(this.props.defaultFilter)){this.setState(this._calibrateState(ra,{}));}else this.setState(this._calibrateState(ra,this.state));},render:function(){if(!this.state.fieldConfig)return u.createElement('i',{className:'hidden_elem'});var ra=la("_5b5o",this.props.className);return this.props.applyOnly?this._renderApplyOnlyToken(ra):this._renderEditableToken(ra);},_renderApplyOnlyToken:function(ra){ra=la(ra,"_4cld");return (u.createElement('div',{className:ra},this._renderApplyOnlyLabel(),this._renderApplyButton()));},_renderApplyOnlyLabel:function(){!!!this.props.defaultFilter?ka(0):undefined;var ra=i.getConfigByField(this.props.fieldsConfig,this.props.defaultFilter.field),sa=ra.helpText,ta=ra.iconURI,ua=ra.largeIcon,va=ra.text,wa=this.props.defaultFilter.value,xa=sa?u.createElement(l,{position:'below',width:200},sa):null;return (u.createElement('div',{className:"_5b5t _2d2k"},this._renderIcon(ta,ua),u.createElement('div',{className:"_5b5r"},ia._("{field}: ({value})",[ia.param('field',va),ia.param('value',wa.length)]),xa)));},_autoOpenMenu:function(){this.refs.fieldSelector.showMenu();},_renderEditableToken:function(ra){return (u.createElement('div',{className:ra},this._renderFieldSelector(),this._renderOperatorSelector(),this._renderInput(),this._renderApplyButton(),this._renderCancelButton()));},_renderIcon:function(ra,sa){if(!ra)return null;return (u.createElement(s,{className:"_5b5p"+(!!sa?' '+"_4gem":''),src:ra}));},_renderFieldSelector:function(){var ra=this.state.fieldConfigOptions.map((function(sa){var ta=ma,ua;if(sa.iconURI)ua=this._renderIcon(sa.iconURI,sa.largeIcon);if(sa.isDynamic){if(sa.values===undefined){ta=ea;ua=u.createElement(da,null);}if(sa.values===null){ta=ea;ua=u.createElement(s,{className:"_5b5p",src:ja('remove')});}}return (u.createElement(ta,{value:sa,key:'field_option_'+sa.field.toString()},u.createElement('div',{className:"_5b5q"},ua,u.createElement('div',{className:"ellipsis _5b5r",'data-hover':'tooltip','data-tooltip-display':'overflow'},sa.text))));}).bind(this));return (u.createElement(qa,{className:"_5b5s",defaultValue:this.state.fieldConfig,key:'field_'+this.state.fieldConfig.field.toString(),ref:'fieldSelector',disabled:this.props.disableFieldSelector,onChange:this._onFieldItemChange,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem},ra));},_renderOperatorSelector:function(){var ra=this.state.operatorConfigOptions.map(function(sa){return (u.createElement(ma,{value:sa,key:'operator_'+sa.operator},u.createElement('div',{className:"_5b5q"},sa.text)));});return (u.createElement(qa,{key:'operator_'+this.state.fieldConfig.field.name,className:"_5b5s",onChange:this._onOperatorItemChange,defaultValue:this.state.operatorConfig,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem},ra));},_renderInput:function(){var ra=this.state.fieldValueRenderer;switch(this.state.fieldConfig.field.type){case j.CURRENCY:return this._renderNumberInput('currency');case j.NUMBER:return this._renderNumberInput('number');case j.STRING_SET:case j.NUMBER_SET:return this._renderStringSetInput();case j.DATE_RANGE:return this._renderDateRangeInput();default:return (u.createElement(n,{onEnter:this._onEnter,onEscape:this.props.onCancel,value:ra(this.state.value),onChange:this._onTextValueChange,format:'string',shouldFocus:this.state.shouldFocusInput}));}},_renderNumberInput:function(ra){if(Array.isArray(this.state.fieldConfig.values))return this._renderStringSetInput();var sa=this.state.value,ta=this.state.fieldValueRenderer;switch(this.state.valueOperator){case k.IN_RANGE:case k.NOT_IN_RANGE:return (u.createElement('div',{className:"_5b5t"},u.createElement(n,{onEnter:this._onEnter,onEscape:this.props.onCancel,value:ta(sa[0]),onChange:this._onRangeValueStartChange,format:ra,shouldFocus:this.state.shouldFocusInput}),'\u2013',u.createElement(n,{onEnter:this._onEnter,onEscape:this.props.onCancel,value:ta(sa[1]),onChange:this._onRangeValueEndChange,format:ra})));default:return (u.createElement(n,{onEnter:this._onEnter,onEscape:this.props.onCancel,value:ta(sa),onChange:this._onTextValueChange,format:ra,shouldFocus:this.state.shouldFocusInput}));}},_renderDateRangeInput:function(){var ra=r.now(this.props.timezoneID||x.UTC);this.props.timezoneID==null;var sa=this.state.value;if(this.state.operatorConfig.operator===k.IN_RANGE)return (u.createElement(ba,{defaultStartFocusTime:ra.addDays(-7).getUnixTimestamp(),defaultEndFocusTime:ra.getUnixTimestamp(),defaultStartSelectTime:sa[0],defaultEndSelectTime:sa[1],yearRangePast:1,yearRangeFuture:1,onRangeSelected:this._onDateRangeSelected}));return (u.createElement(aa,{initialTime:sa,shouldSetDefaultDate:false,onCalendarSelectDateChange:this._onSelectedDateChange}));},_renderStringSetInput:function(){var ra=this.state.fieldConfig,sa=this.state.fieldValueRenderer,ta;switch(this.state.operatorConfig.operator){case k.EQUAL:case k.NOT_EQUAL:ta=ra.values.map(function(ua){return (u.createElement(ma,{value:ua.value,key:ua.value},ua.text||sa(ua.value)));});return (u.createElement(qa,{className:"_5b5s",key:'value_set_selector_'+ra.field.name,onChange:this._onStringSetSelectorValueChange,defaultValue:this.state.value,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem},ta));default:ta=ra.values.map((function(ua){var va=this.state.value.indexOf(ua.value)>-1;return (u.createElement(oa,{value:ua.value,key:ua.value,text:ua.text||sa(ua.value),checked:va}));}).bind(this));return (u.createElement(o,{className:"_5b5s _bm6",onChange:this._onTextValueSetChange},ta));}},_isValueValid:function(){var ra=this.state.value;if(ra){var sa=this.state.operatorConfig.operator;switch(sa){case k.IN_RANGE:case k.NOT_IN_RANGE:if(!ra[0]||!ra[1]||Number(ra[1])<=Number(ra[0]))return false;break;case k.IN:case k.NOT_IN:if(!ra.length)return false;break;}return true;}else return false;},_renderApplyButton:function(){if(this._isValueValid()){var ra=this.props.defaultFilter?ia._("Apply"):ia._("Add");return (u.createElement(y,{className:"_5b5u _5b5v",label:ra,use:'default',onClick:this._onApplyButtonClick}));}return null;},_renderCancelButton:function(){return (u.createElement(z,{className:"_5b5u _5b5w",size:'small',onClick:this._onCancelButtonClick}));},_onEnter:function(event){if(this._isValueValid())this._onApplyButtonClick(event);},_onApplyButtonClick:function(event){event.preventDefault();this.props.onSubmit(this.state.fieldConfig.field,this.state.operatorConfig.operator,this.state.value);},_onCancelButtonClick:function(event){event.preventDefault();this.props.onCancel&&this.props.onCancel();},_registerChange:function(ra){var sa=babelHelpers._extends({},this.state,ra);this.setState(this._calibrateState(this.props,sa));},_parseValue:function(ra){var sa=this.state.fieldValueParser;return sa(ra);},_onFieldItemChange:function(ra){this._registerChange({fieldConfig:ra.value,shouldFocusInput:true});},_onOperatorItemChange:function(ra){this._registerChange({operatorConfig:ra.value,shouldFocusInput:true});},_onTextValueChange:function(ra){this._registerChange({value:this._parseValue(ra)});},_onSelectedDateChange:function(ra){this._registerChange({value:this._parseValue(ra.getTime())});},_onDateRangeSelected:function(ra,sa){this._registerChange({value:[this._parseValue(ra),this._parseValue(sa)]});},_onRangeValueStartChange:function(ra){this._registerChange({value:[this._parseValue(ra),this.state.value[1]],shouldFocusInput:false});},_onRangeValueEndChange:function(ra){this._registerChange({value:[this.state.value[0],this._parseValue(ra)]});},_onStringSetSelectorValueChange:function(ra){this._registerChange({value:this._parseValue(ra.value)});},_onTextValueSetChange:function(ra){this._registerChange({value:ra.map(this._parseValue,this)});},_onDocumentClick:function(event){if(!this.props.onCancel||!this.props.dismissOnBlur)return;var ra=event.target,sa=v.findDOMNode(this);if(p.contains(sa,ra)||t.bySelector(ra,"._1t-2")||t.bySelector(ra,"._5b5q")||t.bySelector(ra,"._5hq3")||t.bySelector(ra,"._5c6i"))return;var ta=ra;while(ta&&ta.nodeType===1){if(ta.getAttribute('role')==='menu')return;ta=ta.parentNode;}var ua=w.getElementBounds(sa),va=20;ua=new w(ua.t-va,ua.r+va,ua.b+va,ua.l-va);var wa=w.getElementBounds(ra);if(ua.contains(wa))return;this.props.onCancel();},_calibrateState:function(ra,sa){m.calibrateFieldState(ra,sa);m.calibrateOperatorState(ra,sa);m.calibrateValueState(ra,sa);return sa;},_setClickHandler:function(){if(!this._clickHandler)this._clickHandler=q.listen(document,'click',this._onDocumentClick);},_unsetClickHandler:function(){if(this._clickHandler){this._clickHandler.remove();this._clickHandler=null;}}}),qa=u.createClass({displayName:'Selector',render:function(){var ra=this.props.children.length==1&&this.props.hideMenuOnSingleItem;return (u.createElement(ca,{className:this.props.className,onChange:this.props.onChange,defaultValue:this.props.defaultValue,disabled:ra||this.props.disabled,ref:'selector'},u.createElement(fa,{maxwidth:500,className:"_bm6",haschevron:false,suppressed:true}),this.props.children));},showMenu:function(){this.refs.selector.showMenu();}});f.exports=pa;},null);
__d('BUIFilterToken.react',['ix','AdsGenericFilter','AdsGenericFilterFieldConfigUtil','AdsGenericFilterOperatorConfigUtil','BUIFilterTokenInput.react','AdsGenericFilterValueTextUtil','Image.react','React','ReactDOM','ReactComponentWithPureRenderMixin','XUICloseButton.react','cx','fbglyph','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=o.PropTypes,w=4,x=o.createClass({displayName:'BUIFilterToken',mixins:[q],propTypes:{contentEditable:v.bool.isRequired,disabled:v.bool,dismissOnBlur:v.bool.isRequired,index:v.number.isRequired,filter:v.instanceOf(i).isRequired,onChange:v.func.isRequired,onRemove:v.func.isRequired,onEditAttempt:v.func,onEditCancelAttempt:v.func,validFieldConfigs:v.array.isRequired,filterConstructor:v.func,fieldsConfig:v.object.isRequired,valuesConfig:v.object.isRequired,theme:v.oneOf(['regular','dark']).isRequired,timezoneID:v.number,hideMenuOnSingleItem:v.bool,disableFieldSelector:v.bool},getDefaultProps:function(){return {dismissOnBlur:true,filterConstructor:i,theme:'regular'};},render:function(){var y=this.props.contentEditable,z="_3yz1"+(y?' '+"_3yz2":'')+(!this._isApplyOnly()&&!this._isDisabled()?' '+"_4tod":'')+(this._isApplyOnly()?' '+"_3dad":'')+(this._isDarkTheme()?' '+"_2sy-":''),aa=this._renderEditable();return (o.createElement('div',{className:z},o.createElement('div',{className:"_3yz4",ref:'filterToken','aria-hidden':!y},this._renderText(),this._renderDeprecatedWarning(),this._renderRemove()),aa));},_renderEditable:function(){if(this.props.contentEditable)return (o.createElement(l,{ref:'filterTokenInput',applyOnly:this._isApplyOnly(),className:"_3yz3",defaultFilter:this.props.filter,dismissOnBlur:this.props.dismissOnBlur,onSubmit:this._onSubmit,onCancel:this._onEditCancelAttempt,validFieldConfigs:this.props.validFieldConfigs,fieldsConfig:this.props.fieldsConfig,timezoneID:this.props.timezoneID,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem,disableFieldSelector:this.props.disableFieldSelector}));},_renderDeprecatedWarning:function(){if(!this._isDeprecated())return null;var y=this._getFieldConfig();return (o.createElement(n,{'aria-label':y.deprecationMessage,className:"_3-99",'data-hover':'tooltip',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/caution-solid_16_white.png")}));},componentDidMount:function(){this._setWidthOfApplyOnlyToken();},componentDidUpdate:function(){this._setWidthOfApplyOnlyToken();},_renderText:function(){var y=this._getDisplayTextValues(),z=y.fieldIcon,aa=y.fieldText,ba=y.operatorText,ca=y.valueText,da=this._renderOperatorAndValueText(ba,ca);return (o.createElement('div',{onClick:this._onEditAttempt,className:"_3yz5"},this._renderIcon(z),o.createElement('div',{className:"_3yz7"},aa),o.createElement('div',{className:"ellipsis _3yz8",'data-hover':'tooltip','data-tooltip-display':'overflow'},da)));},_renderIcon:function(y){var z=y.uri,aa=y.isLarge;return (function(){if(!z)return null;return (o.createElement(n,{className:"_3yz6"+(aa?' '+"_5whs":''),src:z}));})();},_renderRemove:function(){return (o.createElement(r,{className:"_3yz9 _1t-2 _50z_",size:'small',onClick:this._onRemove}));},_isDisabled:function(){return this.props.disabled||this._isDeprecated();},_onEditCancelAttempt:function(){if(this.props.onEditCancelAttempt)this.props.onEditCancelAttempt(this.props.filter,this.props.index);},_onEditAttempt:function(event){event.preventDefault();if(!this._isApplyOnly()&&!this._isDisabled()&&this.props.onEditAttempt)this.props.onEditAttempt(this.props.filter,this.props.index);},_onRemove:function(event){event.preventDefault();this.props.onRemove(this.props.filter,this.props.index);},_onSubmit:function(y,z,aa){if(this.props.filterConstructor==null)return;var ba=new this.props.filterConstructor(y,z,aa);this.props.onChange(ba,this.props.index);},_getDisplayTextValues:function(){var y=this._getFieldConfig();return {fieldIcon:{uri:y.iconURI,isLarge:!!y.largeIcon},fieldText:this._getFieldText(y),operatorText:y.isStatic?'':this._getOperatorText(),valueText:m.getValueText(this.props.filter,y,this.props.valuesConfig)};},_getFieldConfig:function(){return j.getConfigByField(this.props.fieldsConfig,this.props.filter.field);},_isApplyOnly:function(){var y=this._getFieldConfig();return !!y.applyOnly;},_isDarkTheme:function(){return this.props.theme==='dark';},_getFieldText:function(y){var z=y.text;return u._("{field}:",[u.param('field',z)]);},_getOperatorText:function(){var y=this.props.filter.operator,z=k.getConfigByOperator(y);return z.shortText||'';},_renderOperatorAndValueText:function(y,z){if(this._isApplyOnly()){return u._("({value})",[u.param('value',z)]);}else{var aa=y?o.createElement('span',{className:"_3_lp"},y):'';return u._("{operator}{value}",[u.param('operator',aa),u.param('value',z)]);}},_setWidthOfApplyOnlyToken:function(){if(!this.refs.filterToken)return;var y=p.findDOMNode(this.refs.filterToken);if(this._isApplyOnly()&&this.refs.filterTokenInput){var z=p.findDOMNode(this.refs.filterTokenInput),aa=getComputedStyle(z).width;aa=parseInt(aa,10)+w;y.style.width=aa+'px';}else y.style.width='auto';},_isDeprecated:function(){var y=this._getFieldConfig();return !!y.deprecationMessage;}});f.exports=x;},null);
__d('BUIFilterTokenCreateButton.react',['BUIFilterTokenInput.react','Image.react','React','ReactComponentWithPureRenderMixin','XUIButton.react','cx','xuiglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'BUIFilterTokenCreateButton',propTypes:{autoOpenFieldSelector:o.bool,filterBlacklist:o.array,onSubmit:o.func.isRequired,onCreateButtonToggle:o.func,validFieldConfigs:o.array.isRequired,fieldsConfig:o.object.isRequired,theme:o.oneOf(['regular','dark']).isRequired,timezoneID:o.number,hideMenuOnSingleItem:o.bool,isInitiallyEditing:o.bool},mixins:[k],getDefaultProps:function(){return {autoOpenFieldSelector:false,isInitiallyEditing:false,theme:'regular'};},getInitialState:function(){return {editing:this.props.isInitiallyEditing,field:null,operator:null,value:null};},render:function(){if(this.state.editing){return (j.createElement('div',{className:"_1tc"},j.createElement(h,{autoOpenFieldSelector:this.props.autoOpenFieldSelector,className:"_1tb",filterBlacklist:this.props.filterBlacklist,onSubmit:this._onSubmit,onCancel:this._hideInput,timezoneID:this.props.timezoneID,validFieldConfigs:this.props.validFieldConfigs,fieldsConfig:this.props.fieldsConfig,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem})));}else{var q=this._renderIcon();return (j.createElement('div',{className:"_1tc"+(this._isDarkTheme()?' '+"_1wde":'')},j.createElement(l,{className:"_1wdf",size:'small',onClick:this._showInput,image:q})));}},_renderIcon:function(){var q;if(this._isDarkTheme()){q=n({name:'plus',size:'small',shade:'white'});}else q=n({name:'plus',size:'small',shade:'dark'});return j.createElement(i,{src:q});},_isDarkTheme:function(){return this.props.theme==='dark';},_showInput:function(event){event.preventDefault();this.setState({editing:true});if(this.props.onCreateButtonToggle)this.props.onCreateButtonToggle(true);},_hideInput:function(){this.setState({editing:false});if(this.props.onCreateButtonToggle)this.props.onCreateButtonToggle(false);},_onSubmit:function(q,r,s){this.setState({editing:false,field:q,operator:r,value:s},this._didSubmit);if(this.props.onCreateButtonToggle)this.props.onCreateButtonToggle(false);},_didSubmit:function(){this.props.onSubmit(this.state.field,this.state.operator,this.state.value);}});f.exports=p;},null);
__d('BUIFilterTokenizer.react',['AdsCMSaveFilterSetDialog.react','AdsFilterChangeTypes','AdsGenericFilter','AdsGenericFilterFieldConfigUtil','AdsGenericFilterSet','BUIFilterToken.react','BUIFilterTokenCreateButton.react','DOM','React','ReactDOM','curry','cx','fbt','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=p.PropTypes,x=p.createClass({displayName:'BUIFilterTokenizer',propTypes:{applyOnlyFilter:w.instanceOf(j),autoOpenAddButtonFieldSelector:w.bool,autoOpenAddButtonWhenEmpty:w.bool,filterSet:w.instanceOf(l),onApplyOnlyRemove:w.func,onChange:w.func.isRequired,onCreateButtonToggle:w.func,onSave:w.func,onClear:w.func,validFieldConfigs:w.array.isRequired,filterSetConstructor:w.func,filterConstructor:w.func,fieldsConfig:w.object.isRequired,valuesConfig:w.object.isRequired,theme:w.oneOf(['regular','dark']).isRequired,timezoneID:w.number,hideLabel:w.bool,hideAddButton:w.bool,inlineMode:w.bool.isRequired,dismissTokensOnBlur:w.bool.isRequired,trailingNotice:w.oneOfType([w.string,w.node]),hideMenuOnSingleItem:w.bool,disableFieldSelector:w.bool},getInitialState:function(){return {activeFilter:this._getDefaultFilter(),validFieldConfigs:this._filterHiddenFromValidFieldConfigs(this.props.validFieldConfigs)};},getDefaultProps:function(){return {autoOpenAddButtonFieldSelector:false,autoOpenAddButtonWhenEmpty:false,dismissTokensOnBlur:true,filterSetConstructor:l,filterConstructor:j,hideLabel:false,hideAddButton:false,inlineMode:false,theme:'regular'};},componentWillReceiveProps:function(z){var aa=this.state.activeFilter,ba=this.state.validFieldConfigs,ca=null,da=false;if(z.validFieldConfigs!==this.props.validFieldConfigs)ba=this._filterHiddenFromValidFieldConfigs(z.validFieldConfigs);if(z.filterSet)z.filterSet.values.forEach(function(ea){if(aa&&aa.key===ea.key)da=true;if(ea.value===''||ea.value.length===0)ca=ea;});if(!da)aa=ca;this.setState({activeFilter:aa,validFieldConfigs:ba});},render:function(){var z=this._renderTokenizerLabel(),aa=this._calculateTokens(),ba=aa.tokens,ca=aa.filterBlacklist,da=aa.incompleteTokenCount,ea=this._getApplicableFilterCount(),fa=this._renderCreateButton(ea,ca),ga=this._renderSaveButton(ea,da),ha=this._renderClearButton(ba),ia=this._renderApplyOnlyToken(this.props.applyOnlyFilter),ja=this._renderTrailingNotice(this.props.trailingNotice),ka=v(this.props.className,('')+(this._isDarkTheme()?' '+"_1nj0":'')+(this._isDarkTheme()?' '+"_2sy-":'')+(this.props.inlineMode?' '+"_5xvq":'')+(' '+"clearfix"));return (p.createElement('div',{className:ka},z,ba,ia,fa,ja,p.createElement('div',{className:"_49u3"},ga,ha)));},_calculateTokens:function(){var z=[],aa={},ba=[],ca=0;if(this.props.filterSet)this.props.filterSet.values.forEach((function(da,ea){var fa=da.field,ga=k.getConfigByField(this.props.fieldsConfig,fa);if(ga){var ha=fa.name;ca+=!da.isComplete();if(!ga.allowDuplication){ba.push(da);!!aa[ha]?u(0):undefined;aa[ha]=true;}z.push(this._renderToken(da,ea));}}).bind(this));return {tokens:z,filterBlacklist:ba,incompleteTokenCount:ca};},_renderCreateButton:function(z,aa){if(!this.props.hideAddButton&&z<this.state.validFieldConfigs.length)return (p.createElement(n,{autoOpenFieldSelector:this.props.autoOpenAddButtonFieldSelector,filterBlacklist:aa,isInitiallyEditing:z===0&&this.props.autoOpenAddButtonWhenEmpty,onSubmit:this._onFilterInputSubmit,validFieldConfigs:this.state.validFieldConfigs,fieldsConfig:this.props.fieldsConfig,theme:this.props.theme,timezoneID:this.props.timezoneID,onCreateButtonToggle:this._onCreateButtonToggle,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem}));return null;},_renderSaveButton:function(z,aa){if(z>aa&&this.props.onSave)return (p.createElement('div',{className:"_49u2"+(this.props.disableSaveButton?' '+"_wda":'')+(' '+"_3yz4")+(' '+"_3yz8"),tabIndex:0,onClick:this.props.disableSaveButton?null:this._onSaveClick},t._("Save Filter")));return null;},_renderClearButton:function(z){if(z.length>0&&this.props.onClear)return (p.createElement('div',{className:"_49u2 _3yz4 _3yz8",tabIndex:0,onClick:this._onClickClear},t._("Clear")));return null;},_renderTokenizerLabel:function(){if(!this.props.hideLabel)return (p.createElement('span',{className:"_3o1w"},t._("Filters:")));},_renderToken:function(z,aa){var ba=this._getValidFieldConfigs(z),ca=this._isFilterAvailable(z);return (p.createElement(m,{key:'token'+aa,contentEditable:y(this.state.activeFilter,z),disabled:!ca,dismissOnBlur:this.props.dismissTokensOnBlur,filter:z,index:aa,onEditCancelAttempt:this._onEditCancelAttempt,onEditAttempt:this._onEditAttempt,onRemove:this._onFilterRemove,onChange:this._onFilterChange,validFieldConfigs:ba,filterConstructor:this.props.filterConstructor,fieldsConfig:this.props.fieldsConfig,valuesConfig:this.props.valuesConfig,timezoneID:this.props.timezoneID,theme:this.props.theme,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem,disableFieldSelector:this.props.disableFieldSelector}));},_renderTrailingNotice:function(z){if(!z)return null;return (p.createElement('div',{className:"_4pfn"},z));},_renderApplyOnlyToken:function(z){if(!z)return null;var aa=this.props.filterSet?this.props.filterSet.values.length:0,ba=k.getConfigByField(this.props.fieldsConfig,z.field);return (p.createElement(m,{applyOnly:true,contentEditable:true,dismissOnBlur:false,fieldsConfig:this.props.fieldsConfig,filter:z,filterConstructor:this.props.filterConstructor,index:aa,key:'token'+aa,onChange:this._onApplyOnlyApply,onRemove:this._onApplyOnlyRemove,onEditCancelAttempt:this._onApplyOnlyRemove,theme:this.props.theme,timezoneID:this.props.timezoneID,validFieldConfigs:[ba],valuesConfig:this.props.valuesConfig}));},_onEditAttempt:function(z,aa){this.setState({activeFilter:z});},_onEditCancelAttempt:function(z,aa){if(this._isEmptyFilterValue(z.value)){this._onFilterRemove(z,aa);}else this.setState({activeFilter:null});},_onFilterRemove:function(z,aa){var ba=this.props.filterSet.values.slice(0);ba.splice(aa,1);var ca=ba.length?new this.props.filterSetConstructor(ba):null;this.props.onChange(ca,i.REMOVE,this._getApplicableFilterCount());},_onFilterChange:function(z,aa){var ba=this._getNewFiltersArray();ba[aa]=z;var ca=r(this.props.onChange,new this.props.filterSetConstructor(ba),i.EDIT);this.setState({activeFilter:null},ca);},_onFilterInputSubmit:function(z,aa,ba){var ca=this.props.filterSet?this.props.filterSet.values.slice(0):[];ca.push(new this.props.filterConstructor(z,aa,ba));var da=new this.props.filterSetConstructor(ca);this.props.onChange(da,i.ADD_INPUT,this._getApplicableFilterCount());},_onClickClear:function(event){this.props.onClear(event,this._getApplicableFilterCount());},_onSaveClick:function(){q.render(p.createElement(h,{onSave:this.props.onSave}),o.create('div'));},_onApplyOnlyApply:function(z,aa){this._onApplyOnlyRemove();this._onFilterChange(z,aa);},_onApplyOnlyRemove:function(){if(this.props.onApplyOnlyRemove)this.props.onApplyOnlyRemove();},_getDefaultFilter:function(){if(this.props.filterSet)return this.props.filterSet.values.find(function(z){return z.value==='';});},_getNewFiltersArray:function(){var z;if(this.props.filterSet){z=this.props.filterSet.values.slice(0);}else z=[];return z;},_getValidFieldConfigs:function(z){return this.state.validFieldConfigs.filter((function(aa){if(z.field.key===aa.field.key)return true;return !k.isFieldInFilterSet(aa.field,this.props.filterSet);}).bind(this));},_isEmptyFilterValue:function(z){if(z==='')return true;if(Array.isArray(z)&&z.length===0)return true;return false;},_isFilterAvailable:function(z){return this.state.validFieldConfigs.some(function(aa){return (z.field.key===aa.field.key&&!aa.isStatic);});},_getApplicableFilterCount:function(){if(!this.props.filterSet)return 0;return this.props.filterSet.values.filter((function(z){return (this.state.validFieldConfigs.some(function(aa){return (z.field.key===aa.field.key);}));}).bind(this)).length;},_filterHiddenFromValidFieldConfigs:function(z){return z.filter(function(aa){return !aa.applyOnly;});},_isDarkTheme:function(){return this.props.theme==='dark';},_onCreateButtonToggle:function(z){if(z&&!this.props.dismissTokensOnBlur)this.setState({activeFilter:null});if(this.props.onCreateButtonToggle)this.props.onCreateButtonToggle(z);}});function y(z,aa){if(z&&aa){return z.key===aa.key;}else return z===aa;}f.exports=x;},null);