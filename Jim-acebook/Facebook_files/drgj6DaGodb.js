/*!CK:763830575!*//*1453961608,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["djQuf"]); }

__d("PhotoEditorTargetType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER:"composer",COMMENT:"comment",PAGE_PRODUCT_COMPOSER:"page_product_composer"};},null);
__d('AdsCommonTargetingEstimatedReach',['AdsCommonTargetingApiTransformer','AdsCommonTargetingSectionMixin','Bootloader','React','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=k.createClass({displayName:'AdsCommonTargetingEstimatedReach',mixins:[i],propTypes:{targetingID:m.string.isRequired,config:m.object,extraData:m.object},componentWillMount:function(){j.loadModules(["AdsTargetingEstimatedReach.react"],this.updateSectionEditor);},renderSectionEditor:function(){var o=this.getSectionEditor();!this.props.extraData.accountID?l(0):undefined;return (k.createElement(o,{accountID:this.props.extraData.accountID,targetingApiSpec:h.toApi(this.props.targetingID),width:this.getDefaultWidth()}));}});f.exports=n;},null);
__d("AdsStrings",["fbt"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={MixedFormatEditWarning:h._("Your selection has multiple objectives, ad formats, or options that can't be edited together. As a result, not all options are available to edit for this selection."),MixedValuePlaceholder:h._("Mixed Values"),MixedVisibilityFieldWarning:h._("This field is not applicable for some of the selected ads. Change your selection to edit this field."),UntitledAdPlaceholder:h._("[Untitled]"),UntitledCampaignPlaceholder:h._("[Untitled]")};f.exports=i;},null);
__d('DraggableTokenMixin.react',['React','ReactDOM','Rect','cx','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n={lastDragEventPageX:null,propTypes:{index:m.number,onTokenDragEnd:m.func,onTokenDragLeave:m.func,onTokenDragOver:m.func,onTokenDragStart:m.func,onTokenDrop:m.func,isDragDropEnabled:m.bool},getDefaultProps:function(){return {onTokenDragEnd:l,onTokenDragLeave:l,onTokenDragOver:l,onTokenDragStart:l,onTokenDrop:l};},renderDraggableToken:function(p){if(!this.props.isDragDropEnabled)return p;return (h.createElement('a',{className:"_5o8l",draggable:true,href:'javascript:;',onClick:o,onDragStart:this._onTokenDragStart,onDragEnd:this._onTokenDragEnd,onDragOver:this._onTokenDragOver,onDragLeave:this._onTokenDragLeave,onDrop:this._onTokenDrop,ref:'draggableToken'},p));},_onTokenDragStart:function(event){var p=event.nativeEvent.dataTransfer;if(p){p.setData('text','');if(p.setDragImage)p.setDragImage(i.findDOMNode(this.refs.draggableToken),0,0);}this.props.onTokenDragStart(this.props.entry,this.props.index);},_onTokenDragEnd:function(event){this.props.onTokenDragEnd(this.props.entry,this.props.index);},_onTokenDragLeave:function(event){this.props.onTokenDragLeave(this.props.entry,this.props.index);},_onTokenDragOver:function(event){event.preventDefault();event.stopPropagation();var p=event.nativeEvent.dataTransfer;if(p)p.dropEffect='move';if(event.pageX!==this.lastDragEventPageX){var q=i.findDOMNode(this),r=j.getElementBounds(q).getCenter().x,s=event.pageX<r;this.props.onTokenDragOver(this.props.entry,this.props.index,s);}},_onTokenDrop:function(event){event.stopPropagation();this.props.onTokenDrop(this.props.entry,this.props.index);}};function o(p){p.preventDefault();}f.exports=n;},null);
__d('HelpLink.react',['React','joinClasses','TooltipLink.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'HelpLink',render:function(){return (h.createElement(j,babelHelpers._extends({},this.props,{className:i(this.props.className,"uiHelpLink mls")}),undefined));}});f.exports=k;},null);
__d('TokenizerToken.react',['CloseButton.react','React','SearchableEntry','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'TokenizerToken',propTypes:{label:n.string.isRequired,entry:n.instanceOf(j),highlighted:n.bool,glyph:n.element,onRemove:n.func},render:function(){var p;if(this.props.onRemove)p=i.createElement(h,{'aria-label':l._("Remove {item}",[l.param('item',this.props.label)]),className:"_58zx",size:'small',onClick:this._onClick});var q="_58zy"+(this.props.highlighted?' '+"_58zz":'');return (i.createElement('span',babelHelpers._extends({},this.props,{className:m(this.props.className,q),label:null}),this.props.glyph,this.props.label,p));},_onClick:function(p){p.preventDefault();this.props.onRemove(this.props.entry);}});f.exports=o;},null);
__d('XUIDialogCloseButton.react',['React','XUIDialogButton.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'XUIDialogCloseButton',render:function(){return (h.createElement(i,babelHelpers._extends({},this.props,{action:'cancel',label:j._("Close")})));}});f.exports=k;},null);
__d('XUIDialogSaveButton.react',['React','XUIDialogButton.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'XUIDialogSaveButton',render:function(){return (h.createElement(i,babelHelpers._extends({},this.props,{action:'confirm',label:j._("Save")})));}});f.exports=k;},null);
__d('AbstractTokenizer.react',['AbstractTypeahead.react','React','ReactDOM','TokenizerToken.react','cx','ex','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=i.PropTypes,q=i.createClass({displayName:'AbstractTokenizer',propTypes:{alwaysShowPlaceholder:p.bool,className:p.string,excludeTokenEntries:p.bool,extraTokenRendererProps:p.object,inputClassName:p.string,tokenClassName:p.string,placeholder:p.string,queryString:p.string,searchSource:p.object.isRequired,searchSourceOptions:p.object,shouldClearQueryStringAfterSelect:p.bool,presenter:p.object.isRequired,entries:p.array,onAddEntryAttempt:p.func.isRequired,onEntriesFound:p.func,onPaste:p.func,onRemoveEntryAttempt:p.func.isRequired,onReorderEntryAttempt:p.func,onQueryStringChange:p.func,onInputFocus:p.func,onInputBlur:p.func,onTypeaheadMouseDown:p.func,excludedEntries:p.object,inputID:p.string,entriesWidthMatchContext:p.bool,hideViewWithEntries:p.bool,disabled:p.bool,typeaheadInputStyle:p.object,limit:function(r,s,t){var u=r[s],v=u==null||typeof u==='number'&&u>0;if(!v)return new Error(m('Invalid entries limit `%s` provided, must be a positive '+'number if set.',u));},selectOnBlur:p.bool,selectOnTab:p.bool,tokenizeQueryString:p.func,tokenizeQueryStringOnBlur:p.func},getDefaultProps:function(){return {autoHighlight:true,excludeTokenEntries:true,hideViewWithEntries:true,onInputBlur:n,selectOnBlur:false,selectOnTab:true,shouldClearQueryStringAfterSelect:true,tokenizeQueryString:n.thatReturnsNull,tokenizeQueryStringOnBlur:n.thatReturnsNull,entriesWidthMatchContext:true};},getInitialState:function(){return {queryString:''};},_getQueryString:function(){return this.props.queryString||this.state.queryString;},_hasReachedEntriesLimit:function(){if(this.props.limit&&this.props.entries)return this.props.entries.length>=this.props.limit;return false;},componentWillReceiveProps:function(r){if(r.queryString==null&&this.props.queryString!=null)this.setState({queryString:this.props.queryString});},render:function(){var r=!!this.props.onReorderEntryAttempt,s=o("_58-2"+(r?' '+"_5ph3":''),'clearfix',this.props.className),t,u=this.props.entries,v={},w=u&&u.length>0,x;if(w){t=[];for(var y=0,z=u.length;y<z;y++){var aa=u[y];x=aa.getUniqueID();t[y]=this._renderToken(aa,y);if(this.props.excludeTokenEntries)v[x]=true;}}if(this.props.excludedEntries)for(x in this.props.excludedEntries)v[x]=this.props.excludedEntries[x];var ba=null;if(!w||this.props.alwaysShowPlaceholder)ba=this.props.placeholder;return (i.createElement('div',babelHelpers._extends({},this.props,{className:o(this.props.className,s),placeholder:null,onClick:this._focusTypeahead,onMouseDown:this._onTypeaheadMouseDown,onDragOver:this.onBackgroundDragOver,onDrop:this.onBackgroundDrop,tabIndex:null,'data-testid':this.props['data-testid']}),t,i.createElement(h,{ref:'typeahead',selectedEntry:null,className:"_58-0",ariaLabel:this.props.placeholder,'data-testid':this.props['data-testid'],inputClassName:this.props.inputClassName,showEntriesOnFocus:this.props.showEntriesOnFocus,queryString:this._getQueryString(),placeholder:ba,presenter:this.props.presenter,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,excludedEntries:v,onSelectAttempt:this._onSelectAttempt,onEntriesFound:this.props.onEntriesFound,onEnterWithoutSelection:this.props.onEnterWithoutSelection,onChange:this._onInputChange,onFocus:this.props.onInputFocus,onBlur:this._onInputBlur,onBackspace:this._onBackspace,onPaste:this.props.onPaste,tabIndex:this.props.tabIndex,autoHighlight:this.props.autoHighlight,selectOnBlur:this.props.selectOnBlur,selectOnTab:this.props.selectOnTab,context:this.props.context,focusedOnInit:this.props.focusedOnInit,inputID:this.props.inputID,entriesWidthMatchContext:this.props.entriesWidthMatchContext,hideViewWithEntries:this.props.hideViewWithEntries,disabled:this.props.disabled,inputStyle:this.props.typeaheadInputStyle}),i.createElement('span',{ref:'textSizeProxy',className:"_58-3",'aria-hidden':'true'},this._getQueryString()||ba)));},componentDidMount:function(){this._syncTimer=setTimeout(this._syncInputWidth,0);},componentDidUpdate:function(){clearTimeout(this._syncTimer);this._syncTimer=setTimeout(this._syncInputWidth,0);},componentWillUnmount:function(){clearTimeout(this._syncTimer);},clearActiveEntries:function(){this.refs.typeahead&&this.refs.typeahead.clearActiveEntries();},focusInput:function(){if(this.refs&&this.refs.typeahead)this.refs.typeahead.focusInput();},_focusTypeahead:function(r){r.preventDefault();this.focusInput();},_onTypeaheadMouseDown:function(){this.props.onTypeaheadMouseDown&&this.props.onTypeaheadMouseDown();},_onInputChange:function(event){if(this._hasReachedEntriesLimit())return;var r=event.target.value,s=this.props.tokenizeQueryString(r);if(s){this._onSelectAttempt(s);}else if(this.props.queryString==null)this.setState({queryString:r});if(this.props.onQueryStringChange)this.props.onQueryStringChange(event);},_onInputBlur:function(){var r=this._getQueryString(),s=this.props.tokenizeQueryStringOnBlur(r);if(s)this._onBlurringSelectAttempt(s);this.props.onInputBlur();},_onSelectAttempt:function(r){this._onAddEntryAttempt(r);setTimeout(this.focusInput,0);},_onBlurringSelectAttempt:function(r){this._onAddEntryAttempt(r);},_onAddEntryAttempt:function(r){if(r){this.props.onAddEntryAttempt(r);if(this.props.queryString==null&&this.props.shouldClearQueryStringAfterSelect)this.setState({queryString:''});}},_onRemove:function(r){this.props.onRemoveEntryAttempt(r);},_onBackspace:function(event){var r=this.props.entries;if(r&&!this._getQueryString()&&r.length){var s=r[r.length-1];this.props.onRemoveEntryAttempt(s);event.preventDefault();setTimeout(this.focusInput,0);}},_syncInputWidth:function(){var r=j.findDOMNode(this.refs.textSizeProxy).offsetWidth;if(r===0)return;this.refs.typeahead.getTextFieldDOM().style.width=r+'px';},onBackgroundDragOver:function(event){event.preventDefault();var r=event.nativeEvent.dataTransfer;if(r)r.dropEffect='move';var s=this.props.entries;this.onTokenDragOver(s[s.length-1],s.length-1,false);},onBackgroundDrop:function(event){this.onTokenDrop(null,this.props.entries.length);},onTokenDragStart:function(r,s){this.setState({draggingIndex:s});},onTokenDragEnd:function(r,s){this.setState({draggingIndex:null});},onTokenDragLeave:function(r,s){if(this.leaveTimer)return;this.leaveTimer=setTimeout((function(){this.leaveTimer=null;if(this.state.dragTargetIndex===null)return;this.setState({dragTargetIndex:null});}).bind(this),100);},onTokenDragOver:function(r,s,t){if(this.leaveTimer){clearTimeout(this.leaveTimer);this.leaveTimer=null;}if(this.state.draggingIndex!==null&&this.state.draggingIndex!==s&&this.props.onReorderEntryAttempt){if(this.state.dragTargetIndex===s&&this.state.draggedOverLeftSideOfElement===t)return;this.setState({dragTargetIndex:s,draggedOverLeftSideOfElement:t});}},onTokenDrop:function(r,s){if(this.state.draggingIndex!==null&&this.props.onReorderEntryAttempt){if(!this.state.draggedOverLeftSideOfElement)s++;if(this.state.draggingIndex!==s)this.props.onReorderEntryAttempt(this.state.draggingIndex,s);}this.setState({draggingIndex:null,dragTargetIndex:null,draggedOverLeftSideOfElement:null});},_renderToken:function(r,s){var t=this.props.presenter.TokenRenderer||k,u=this.state.draggingIndex===s,v=!!this.props.onReorderEntryAttempt,w=this.state.dragTargetIndex===s,x=o("_2ei6"+(u?' '+"_5ph4":'')+(w?' '+"_5o8i":'')+(w&&this.state.draggedOverLeftSideOfElement?' '+"_5o8j":'')+(w&&!this.state.draggedOverLeftSideOfElement?' '+"_5o8k":''),this.props.tokenClassName);return (i.createElement(t,babelHelpers._extends({},this.props.extraTokenRendererProps,{className:x,key:r.getUniqueID(),label:r.getTitle(),entry:r,index:s,onRemove:this._onRemove,isDragDropEnabled:v,onTokenDragStart:this.onTokenDragStart,onTokenDragEnd:this.onTokenDragEnd,onTokenDragOver:this.onTokenDragOver,onTokenDragLeave:this.onTokenDragLeave,onTokenDrop:this.onTokenDrop})));}});f.exports=q;},null);
__d('XUITokenizerRichToken.react',['DraggableTokenMixin.react','Image.react','React','SearchableEntry','XUICloseButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'XUITokenizerRichToken',mixins:[h],propTypes:{label:o.string.isRequired,entry:o.instanceOf(k),onRemove:o.func,highlighted:o.bool},_onRemove:function(q){q.preventDefault();this.props.onRemove(this.props.entry);},getText:function(q){if(q.getSubtitle().length>0){return q.getTitle()+' - '+q.getSubtitle();}else return q.getTitle();},render:function(){var q;if(this.props.onRemove)q=j.createElement(l,{type:'button','aria-label':n._("Remove {item}",[n.param('item',this.props.label)]),className:"_5yii",size:'small',onClick:this._onRemove});var r=this.props.entry;return this.renderDraggableToken(j.createElement('span',this.props,j.createElement('div',{className:"_5yij",label:null},j.createElement(i,{className:"_5yik",src:r.getPhoto()}),this.getText(r),q)));}});f.exports=p;},null);
__d('XUITokenizerToken.react',['DraggableTokenMixin.react','React','SearchableEntry','XUICloseButton.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createClass({displayName:'XUITokenizerToken',mixins:[h],propTypes:{label:o.string.isRequired,entry:o.instanceOf(j),onRemove:o.func,highlighted:o.bool},_onRemove:function(q){q.preventDefault();this.props.onRemove(this.props.entry);},render:function(){var q;if(this.props.onRemove)q=i.createElement(k,{type:'button','aria-label':m._("Remove {item}",[m.param('item',this.props.label)]),className:"_1z6_",size:'small',onClick:this._onRemove});var r="_59_o"+(this.props.highlighted?' '+"_59_r":'');return this.renderDraggableToken(i.createElement('span',babelHelpers._extends({},this.props,{className:n(this.props.className,r),label:null}),i.createElement('span',{'aria-label':this.props.label,title:this.props.label,className:"_5aab"},this.props.label),q));}});f.exports=p;},null);
__d('XUITokenizer.react',['AbstractTokenizer.react','React','XUIError.react','XUITokenizerToken.react','XUITokenizerRichToken.react','XUITypeaheadTextOnlyView.react','XUITypeaheadView.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=i.PropTypes,r={ViewRenderer:n,TokenRenderer:k,useLayer:true},s={ViewRenderer:m,TokenRenderer:k,useLayer:true},t=i.createClass({displayName:'XUITokenizer',propTypes:babelHelpers._extends({alwaysShowPlaceholder:q.bool,autoHighlight:q.bool,className:q.string,context:q.object,entries:q.array,excludedEntries:q.object,onAddEntryAttempt:q.func.isRequired,onEntriesFound:q.func,onInputFocus:q.func,onPaste:q.func,onQueryStringChange:q.func,onRemoveEntryAttempt:q.func.isRequired,onReorderEntryAttempt:q.func,placeholder:q.string,presenter:q.object,queryString:q.string,searchSource:q.object.isRequired,searchSourceOptions:q.object,selectOnBlur:q.bool,selectOnTab:q.bool,testID:q.string,tokenizeQueryString:q.func,viewStyle:q.oneOf(['textonly','rich']),inputID:q.string,entriesWidthMatchContext:q.bool,disabled:q.bool},j.propTypes),getDefaultProps:function(){return {viewStyle:'rich',entriesWidthMatchContext:true};},render:function(){var u=p(this.props.className,"_59_m"),v=this.props.presenter;if(!v){v=this.props.viewStyle=='rich'?r:s;if(this.props.tokenStyle=='rich')v.TokenRenderer=l;}return (i.createElement(j,this.props,i.createElement('div',{className:u,'data-testid':this.props.testID},i.createElement(h,{alwaysShowPlaceholder:this.props.alwaysShowPlaceholder,autoHighlight:this.props.autoHighlight,context:this.props.context,className:"_59_n",entries:this.props.entries,excludedEntries:this.props.excludedEntries,extraTokenRendererProps:this.props.extraTokenRendererProps,focusedOnInit:this.props.focusedOnInit,limit:this.props.limit,onAddEntryAttempt:this.props.onAddEntryAttempt,onEntriesFound:this.props.onEntriesFound,onEnter:this.props.onEnter,onInputBlur:this.props.onInputBlur,onInputFocus:this.props.onInputFocus,onPaste:this.props.onPaste,onQueryStringChange:this.props.onQueryStringChange,onRemoveEntryAttempt:this.props.onRemoveEntryAttempt,onReorderEntryAttempt:this.props.onReorderEntryAttempt,onEnterWithoutSelection:this.props.onEnterWithoutSelection,placeholder:this.props.placeholder,presenter:v,queryString:this.props.queryString,ref:'tokenizer',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,selectOnBlur:this.props.selectOnBlur,selectOnTab:this.props.selectOnTab,showEntriesOnFocus:this.props.showEntriesOnFocus,tokenizeQueryStringOnBlur:this.props.tokenizeQueryStringOnBlur,tokenizeQueryString:this.props.tokenizeQueryString,inputID:this.props.inputID,entriesWidthMatchContext:this.props.entriesWidthMatchContext,disabled:this.props.disabled}))));},focusInput:function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}});f.exports=t;},null);
__d('ComposerXNUX',['AsyncRequest','ComposerXDragDropUtils','CSS','DOM','Event','SubscriptionsHandler','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q={};function r(t,u,v){var w=v.dataTransfer.items;if(w){var x=i.filterImages(w);if(!x.length)return;}s.acknowledgeDialog(t,u);}var s={onInit:function(t,u,v){if(p[v])return;q[v]=q[v]||new m();var w=q[v];w.engage();var x=t.getRoot();j.addClass(x,"_4bka");var y=k.scry(x,"._3o-a");y.forEach(function(z){w.addSubscriptions(l.listen(z,'click',s.acknowledgeDialog.bind(null,v,t)));});if(v==s.CAMERA_NUX)w.addSubscriptions(l.listen(document,'dragenter',r.bind(null,v,t)));w.addSubscriptions(t.subscribe('cancel',s.sendMarkSeenRequest.bind(null,v)),t.subscribe('hide',w.release.bind(w)));t.setContext(u).show();},acknowledgeDialog:function(t,u){s.sendMarkSeenRequest(t);u.hide();},sendMarkSeenRequest:function(t){if(!p[t]){new h('/ajax/photos/composer/mark_nux_seen.php').setData({type:t}).send();p[t]=true;}},onCleanup:function(t){t.hide();}};f.exports=s;},null);
__d("Collection",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){if(!i.__collection__){var k=new Function();for(var l in i.prototype)k.prototype[l]=h._call.bind(null,l);i.__collection__=k;}var m=new i.__collection__();m._elements=j;return m;}h._call=function(i){var j=Array.prototype.slice.call(arguments,1);this._elements.forEach(function(k){k[i].apply(k,j);});return this;};f.exports=h;},null);
__d('Drag',['Event','Arbiter','DOM','Style','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={};m.currentDraggable=null;m.grab=function(n){if(m.currentDraggable)m._onmouseup();n.lastDragOver=null;m.attachDragEvents();m.currentDraggable=n;};m.attachDragEvents=function(){document.onselectstart=function(){document.onselectstart=null;return false;};if(m.dragEventsAttached)return;m.dragEventsAttached=true;i.subscribe('scroller/scroll',m._onmousemove);h.listen(document,{mousemove:m._onmousemove,mouseup:m._onmouseup});};m.droppables={};m.addDroppable=function(n,o){(m.droppables[n]=m.droppables[n]||[]).push(o);};m.removeDroppable=function(n,o){m.droppables[n]=m.droppables[n].filter(function(p){return p!=o;});};m.getOffsetParent=function(n){if(j.isNodeOfType(n,['body','html']))return document.body;while((n=n.parentNode)&&n!==document.body)if(k.get(n,'position')!=='static')return n;return document.body;};m._onmousemove=function(event,n){if(!m.currentDraggable)return;var o=n||l.getEventPosition(event),p=m.currentDraggable,q=m.droppables[p.namespace];if(p.namespace&&p.active&&q){var r={};q.forEach(function(x){r[x.zIndex]=x.zIndex;});var s=[];for(var t in r)s.push(r[t]);s.sort();var u=p.lastDragOver,v=null;for(var w=s.length-1;w>=0;w--)if(u&&u.dom!=null&&u.zIndex==s[w]&&u.isDraggedOver(o)){v=u;break;}else for(t=0;t<q.length;t++){if(s[w]!=q[t].zIndex)continue;if(u!=q[t]&&p.dom!=q[t].dom&&q[t].isDraggedOver(o)){v=q[t];w=-1;break;}}if(v&&v!=u){v.ondragover(p);m.currentDraggable.adjustCursorPosition();}if(v)v.ondragmove(p,o.sub(l.getElementPosition(v.dom)));p.lastDragOver=v;}m.currentDraggable._onmousemove(o);};m._onmouseup=function(n){document.onselectstart=null;if(m.currentDraggable){m.currentDraggable._ondrop();m.currentDraggable=null;}};f.exports=m;},null);
__d('Draggable',['Event','Arbiter','Collection','DOM','Drag','Rect','Style','Vector','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(s){'use strict';this.canvas=s;this.scrollZone=50;this.velocity=100;this.coefficient=1;}q.prototype.activate=function(){'use strict';this.activate=p;this.event=h.listen(document,'mousemove',this._onmousemove.bind(this));this.interval=setInterval(this._intervalHandler.bind(this),50);this.cursor=null;};q.prototype.deactivate=function(){'use strict';delete this.activate;this.event&&this.event.remove();this.event=null;clearInterval(this.interval);};q.prototype._onmousemove=function(event){'use strict';this.cursor=o.getEventPosition(event);};q.prototype._intervalHandler=function(){'use strict';if(!this.cursor)return;var s=this.canvas==document.body?m.getViewportBounds():new m(this.canvas),t=new m(this.cursor.y-s.t,s.r-this.cursor.x,s.b-this.cursor.y,this.cursor.x-s.l),u=new o(0,0);if(t.t<t.b&&t.t<this.scrollZone){u.y=-this.scrollZone+t.t;}else if(t.b<this.scrollZone)u.y=this.scrollZone-t.b;u.y=this._doMath(u.y);if(t.l<t.r&&t.l<this.scrollZone){u.x=-this.scrollZone+t.l;}else if(t.r<this.scrollZone)u.x=this.scrollZone-t.r;u.x=this._doMath(u.x);if(u.x||u.y){u.scrollElementBy(this.canvas);if(document.body==this.canvas){var v=o.getScrollPosition();u.scrollElementBy(this.canvas);var w=o.getScrollPosition();this.cursor=this.cursor.add(w.sub(v));}else u.scrollElementBy(this.canvas);i.inform('scroller/scroll',this.cursor);}};q.prototype._doMath=function(s){'use strict';s=s>=0?Math.min(s,this.scrollZone):Math.max(s,-this.scrollZone);return Math.floor(Math.pow(s/this.scrollZone*this.velocity,this.coefficient));};q.findScrollParent=function(s){'use strict';var t;s=s.parentNode;while(s){if(s.scrollHeight!=s.offsetTop){t=n.get(s,'overflowY');if(t=='scroll'||t=='auto')return s;}s=s.parentNode;}return document.body;};function r(s){'use strict';if(!s)throw new Error('Element should be a DOM node');if(!(this instanceof r)){if(s instanceof Array){var t=[];s.forEach(function(u){t.push(new r(u));});return new j(r,t);}else return new r(s);}else{this.data={};this.handles=[];this.dom=s;this.boundingBox=null;this.useScroller=true;this.grabPctX=this.grabPctY=0;this._shouldKillEvents=true;this.addHandle(this.dom);}}r.prototype.destroy=function(){'use strict';this.handles.forEach((function(s){this.removeHandle(s.obj);}).bind(this));this.data=this.dom=null;};r.prototype.adjustCursorPosition=function(){'use strict';var s=o.getElementDimensions(this.dom);this.cursorPositionVector=new o(parseInt(this.grabPctX*s.x,10),parseInt(this.grabPctY*s.y,10));};r.prototype._onclick=function(event){'use strict';if(!this._shouldKillEvents)return true;if(this.active)return h.kill(event);};r.prototype._ongrab=function(s){'use strict';this.ongrab();if(this.useScroller){if(!this.scroller)this.scroller=new q(q.findScrollParent(this.dom));this.scroller.activate();}if(this.active){if(!this.oldPosition)this.oldPosition=this.dom.style.position;var t=l.getOffsetParent(this.dom);if(t!==document.body)s=s.sub(o.getElementPosition(t));this.dom.style.position=this.absolute?'absolute':'relative';s.sub(this.cursorPositionVector).setElementPosition(this.dom);}};r.prototype._onmousedown=function(event){'use strict';if(!(event.which&&event.which===1||event.button&&event.button===1))return;var s=event.getTarget();if(k.isNodeOfType(s,['input','select','textarea','object','embed']))return true;var t=o.getEventPosition(event),u=o.getElementDimensions(this.dom);this.draggableInitialVector=o.getElementPosition(this.dom);this.cursorPositionVector=t.sub(this.draggableInitialVector);this.grabPctX=u.x===0?0:this.cursorPositionVector.x/u.x;this.grabPctY=u.y===0?0:this.cursorPositionVector.y/u.y;l.grab(this,event);if(this.gutter){this.cursorInitialVector=t;}else{this._setActive(true);this._ongrab(t);}if(!this._shouldKillEvents)return true;return h.kill(event);};r.prototype._onmousemove=function(s){'use strict';if(!this.active)if(s.distanceTo(this.cursorInitialVector)>=this.gutter){this._setActive(true);this._ongrab(s);}if(this.active){var t=s.sub(this.cursorPositionVector),u;if(this.boundingBox){var v=m.newFromVectors(t,o.getElementDimensions(this.dom));v=v.boundWithin(this.boundingBox);t=v.getPositionVector();if(this.boundingBox.w()===0){u=new o(this.draggableInitialVector.x,t.y,'document');}else if(this.boundingBox.h()===0){u=new o(t.x,this.draggableInitialVector.y,'document');}else u=t;}else u=t;var w=l.getOffsetParent(this.dom);if(w!==document.body)u=u.sub(o.getElementPosition(w));u.setElementPosition(this.dom);this.ondrag(s);}};r.prototype._ondrop=function(){'use strict';this.scroller&&this.scroller.deactivate();if(this.active){setTimeout((function(){this._setActive(false);}).bind(this),0);this.ondrop(this.scroller&&this.scroller.cursor);if(this.lastDragOver)this.lastDragOver.ondrop(this);}};r.prototype.killDrag=function(){'use strict';this._setActive(false);l._onmouseup();};r.prototype.forceDrop=function(){'use strict';l._onmouseup();};r.prototype.setBoundingBox=function(s){'use strict';this.boundingBox=s;return this;};r.prototype.resetPosition=function(){'use strict';this.dom.style.position=this.oldPosition;this.oldPosition=null;this.dom.style.left='';this.dom.style.top='';return this;};r.prototype.setUseAbsolute=function(s){'use strict';this.absolute=s;return this;};r.prototype.setDragHandler=function(s){'use strict';this.ondrag=s;return this;};r.prototype.setGrabHandler=function(s){'use strict';this.ongrab=s;return this;};r.prototype.setDropHandler=function(s){'use strict';this.ondrop=s;return this;};r.prototype.setGutter=function(s){'use strict';this.gutter=s;return this;};r.prototype.setNamespace=function(s){'use strict';this.namespace=s;return this;};r.prototype.setUseScroller=function(s){'use strict';this.useScroller=s;return this;};r.prototype.setAvoidKillingEvents=function(s){'use strict';this._shouldKillEvents=!s;return this;};r.prototype.addHandle=function(s){'use strict';if(this.handles.length==1&&this.handles[0].obj==this.dom)this.removeHandle(this.dom);this.handles.push({obj:s,evt:[h.listen(s,'mousedown',this._onmousedown.bind(this)),h.listen(s,'click',this._onclick.bind(this)),h.listen(s,'drag',this._killUnlessActive.bind(this)),h.listen(s,'selectstart',this._killUnlessActive.bind(this))]});return this;};r.prototype.removeHandle=function(s){'use strict';this.handles=this.handles.filter(function(t){if(t.obj!=s){return true;}else{t.evt.forEach(function(u){u.remove();});return false;}});};r.prototype.getDOM=function(){'use strict';return this.dom;};r.prototype.setKey=function(s,t){'use strict';this.data[s]=t;return this;};r.prototype.getKey=function(s){'use strict';return this.data[s];};r.prototype._setActive=function(s){'use strict';if(!this.dom)return;this.dom.activeDrag=this.active=s;for(var t=0;t<this.handles.length;t++)this.handles[t].obj.activeDrag=s;};r.prototype._killUnlessActive=function(s){'use strict';if(!this._shouldKillEvents)return;if(s.getTarget()!==document.activeElement)return s.kill();};r.prototype.ondrag=p;r.prototype.ongrab=p;r.prototype.ondrop=p;r.prototype.gutter=0;r.prototype.handles=null;f.exports=r;},null);
__d('PagesComposerTargeting.react',['PagesComposerAdsTargetingSection.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k=i.createClass({displayName:'PagesComposerTargeting',propTypes:{initialTargetingSpec:j.object,onTargetingChange:j.func.isRequired,canSeeCompleteList:j.bool,useTargetingAsFilter:j.bool,feedTargetingReachEstimateGK:j.bool,canSeeDemographicOptions:j.bool},render:function(){return (i.createElement(h,this.props));}});f.exports=k;},null);
__d('ReactComposerAudienceActionTypes',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({SET_AUDIENCE:null,SET_AUDIENCE_ELEMENT:null,SET_AUDIENCE_INSTANCE:null,SET_PRIVACYX_NULL_DANGEROUS:null});},null);
__d('ReactComposerAudienceStore',['ReactComposerActionStore','ReactComposerAudienceActionTypes','$','DOM','csx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,h);o=n&&n.prototype;function p(){'use strict';var q;o.constructor.call(this,function(){return {audience:null,audienceElement:null,audienceInstance:null,legacyAudience:null,privacyxNullDangerous:false};},function(r){switch(r.type){case i.SET_AUDIENCE:q&&q.$ReactComposerAudienceStore1(r);break;case i.SET_AUDIENCE_ELEMENT:q&&q.$ReactComposerAudienceStore2(r);break;case i.SET_AUDIENCE_INSTANCE:q&&q.$ReactComposerAudienceStore3(r);break;case i.SET_PRIVACYX_NULL_DANGEROUS:q&&q.$ReactComposerAudienceStore4(r);break;}});q=this;}p.prototype.getAudience=function(q){'use strict';if(this.getPrivacyxNullDangerous(q))return null;var r=k.scry(j(q),"._5dd8");!(r.length<2)?m(0):undefined;var s=r[0];if(s){var t=k.scry(s,'input[name="privacyx"]');!(t.length<2)?m(0):undefined;if(t.length===1)return t[0].value;}return this.getComposerData(q).audience;};p.prototype.getLegacyAudience=function(q){'use strict';return this.getComposerData(q).legacyAudience;};p.prototype.getAudienceElement=function(q){'use strict';return this.getComposerData(q).audienceElement;};p.prototype.getAudienceInstance=function(q){'use strict';return this.getComposerData(q).audienceInstance;};p.prototype.getPrivacyxNullDangerous=function(q){'use strict';return this.getComposerData(q).privacyxNullDangerous;};p.prototype.$ReactComposerAudienceStore1=function(q){'use strict';var r=this.validateAction(q,'composerID'),s=this.getComposerData(r);s.audience=q.audience;s.legacyAudience=q.legacyAudience;this.emitChange(r);};p.prototype.$ReactComposerAudienceStore2=function(q){'use strict';var r=this.validateAction(q,['composerID','audienceElement']),s=r[0],t=r[1],u=this.getComposerData(s);u.audienceElement=t;this.emitChange(s);};p.prototype.$ReactComposerAudienceStore3=function(q){'use strict';var r=this.validateAction(q,'composerID'),s=this.getComposerData(r);s.audienceInstance=q.audienceInstance;this.emitChange(r);};p.prototype.$ReactComposerAudienceStore4=function(q){'use strict';var r=this.validateAction(q,'composerID'),s=this.getComposerData(r);s.privacyxNullDangerous=q.privacyxNullDangerous;this.emitChange(r);};f.exports=new p();},null);
__d('ReactComposerPhotoActions',['ReactComposerPhotoActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPhotoStore');var j={startRecognizing:function(k,l){i.dispatch({composerID:k,photoID:l,type:h.PHOTO_RECOGNITION_STARTED});},finishRecognizingPhoto:function(k,l){i.dispatch({composerID:k,type:h.PHOTO_RECOGNITION_FINISHED,photoID:l});},finishRecognizing:function(k,l){i.dispatch({composerID:k,type:h.PHOTO_RECOGNITION_ALL_FINISHED,photos:l});},addFacebox:function(k,l,m){i.dispatch({composerID:k,type:h.PHOTO_ADD_FACEBOX,photoID:l,facebox:m});},tagXY:function(k,l,m,n,o,p,q){i.dispatch({composerID:k,type:h.PHOTO_TAG_XY,value:m,photoID:l,source:n,subject:o,x:p,y:q});},tagFacebox:function(k,l,m,n,o){i.dispatch({composerID:k,type:h.PHOTO_TAG_FACEBOX,photoID:l,faceboxID:m,subjectID:n,value:o});},untagFacebox:function(k,l,m,n){i.dispatch({composerID:k,type:h.PHOTO_UNTAG_FACEBOX,photoID:l,faceboxID:m,subjectID:n});},removePhoto:function(k,l,m){i.dispatch({composerID:k,type:h.PHOTO_REMOVE,photoID:l,uploadID:m});},untagSubjectFromAllPhotos:function(k,l){i.dispatch({composerID:k,type:h.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:l});},startPhotoEdit:function(k){i.dispatch({composerID:k,type:h.PHOTO_EDIT_STARTED});},finishPhotoEdit:function(k){i.dispatch({composerID:k,type:h.PHOTO_EDIT_FINISHED});},setPhotoBeingTagged:function(k,l){i.dispatch({composerID:k,photoID:l,type:h.PHOTO_SET_BEING_TAGGED});}};f.exports=j;},null);
__d('ReactComposerFailedPhotoUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedPhotoUpload.react','ReactComposerPhotoUploadActions','ReactComposerPhotoUploader','ReactComposerPhotoUploadStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=n.PropTypes,p=n.createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',_uploader:undefined,mixins:[m,h],propTypes:{mediaConfig:o.object.isRequired},render:function(){return (n.createElement(i,babelHelpers._extends({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function(){j.removePhotoUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function(){var q=l.getPhotoUpload(this.context.composerID,this.props.uploadID).fileUpload.getFile();q.manuallyRetried=true;j.retryPhotoUpload(this.context.composerID);if(!this._uploader)this._uploader=new k(this.context,this.props.mediaConfig.photoLimit,{disableFaceRecognition:this.props.mediaConfig.disableFaceboxTagger});this._uploader&&this._uploader.retry(q);}});f.exports=p;},null);
__d('ReactComposerLocationAttachmentStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerLocationAttachmentActionType','ReactComposerStoreBase','XReactComposerLocationAttachmentController','AsyncRequest'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(){'use strict';var q;o.constructor.call(this,function(){return {isEnabled:false,isFetching:false,markup:null,pendingRequest:null};},function(r){switch(r.type){case j.LOCATION_ATTACHMENT_ENABLED:q&&q.$ReactComposerLocationAttachmentStore1(r);break;case j.FETCH_LOCATION_ATTACHMENT:q&&q.$ReactComposerLocationAttachmentStore2(r);break;case j.SET_LOCATION_MARKUP:q&&q.$ReactComposerLocationAttachmentStore3(r);break;case h.SELECT_ATTACHMENT:q&&q.$ReactComposerLocationAttachmentStore4(r);break;}});q=this;}p.prototype.isEnabled=function(q){'use strict';return this.getComposerData(q).isEnabled;};p.prototype.getMarkup=function(q){'use strict';return this.getComposerData(q).markup;};p.prototype.isFetching=function(q){'use strict';return this.getComposerData(q).isFetching;};p.prototype.$ReactComposerLocationAttachmentStore1=function(q){'use strict';var r=this.validateAction(q,['composerID','enabled']),s=r[0],t=r[1],u=this.getComposerData(s);u.isEnabled=t;};p.prototype.$ReactComposerLocationAttachmentStore2=function(q){'use strict';var r=this.validateAction(q,['composerID','locationID','targetID']),s=r[0],t=r[1],u=r[2];if(!this.isEnabled(s))return;var v=this.getComposerData(s);v.isFetching=true;var w=l.getURIBuilder().setString('composer_id',s).setString('location_id',t).setString('target_id',u).getURI();v.pendingRequest=new m(w).setFinallyHandler((function(){v.isFetching=false;v.pendingRequest=null;this.emitChange(s);}).bind(this));v.pendingRequest.send();this.emitChange(s);};p.prototype.$ReactComposerLocationAttachmentStore3=function(q){'use strict';var r=this.validateAction(q,['composerID','markup']),s=r[0],t=r[1],u=this.getComposerData(s);u.markup=t;this.emitChange(s);};p.prototype.$ReactComposerLocationAttachmentStore4=function(q){'use strict';var r=this.validateAction(q,['composerID','id']),s=r[0],t=r[1];if(t===i.STATUS)return;var u=this.getComposerData(s);u.markup=null;u.isFetching=false;u.pendingRequest&&u.pendingRequest.abandon();this.emitChange(s);};f.exports=new p();},null);
__d('ReactComposerScrapedAttachmentActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null,ATTACHMENT_CAROUSEL_UPLOAD:null});},null);
__d('ReactComposerTargetingTaggerButton.react',['AsyncRequest','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','ReactComposerTargetingTaggerButtonMixin','PagesComposerAudiences.react','React','ReactLayeredComponentMixin','XReactComposerTargetingTaggerNuxController','XUIAmbientNUX.react','XUIText.react','fbt','PagesComposerAudiencesConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=m.PropTypes,u=s.TABS,v=-12,w=300,x=m.createClass({displayName:'ReactComposerTargetingTaggerButton',mixins:[i,k,n],propTypes:{feedTargetingGK:t.bool,feedTargetingShowReachGK:t.bool,shouldShowTargetingTaggerNux:t.bool,shouldShowRestrictionTabNux:t.bool,useTargetingAsFilter:t.bool},statics:{taggerID:j.TARGETING,disableToggle:true},getDefaultProps:function(){return {feedTargetingGK:false,feedTargetingShowReachGK:false,useTargetingAsFilter:true};},getInitialState:function(){return {showTargetingTaggerNux:this.props.shouldShowTargetingTaggerNux};},componentDidMount:function(){var y=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(y){var z=o.getURIBuilder().getURI();new h().setURI(z).setMethod('POST').setData({impression:true}).send();}},_onNuxClose:function(){this.setState({showTargetingTaggerNux:false});var y=o.getURIBuilder().getURI();new h().setURI(y).setMethod('POST').setData({acked:true}).send();},_renderNux:function(){return (m.createElement(p,{contextRef:(function(){return this.refs.fbReactComposerTargetingTagger;}).bind(this),onCloseButtonClick:this._onNuxClose,offsetY:v,position:'below',shown:true,width:'custom',customwidth:w},m.createElement('div',null,m.createElement(q,null,r._("Use Audience Optimization to reach people who are more likely to engage with your post.")))));},renderLayers:function(){var y=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(y)return this._renderNux();if(this.state.dialogShown)return (m.createElement(l,{shown:this.state.dialogShown,onToggle:this._onToggle,onSave:(function(){return this._onToggle(false);}).bind(this),initialActiveKey:u.TARGETING,useTargetingAsFilter:this.props.useTargetingAsFilter,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux}));return {};}});f.exports=x;},null);
__d("XReactComposerMinutiaeAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/minutiae\/attachment\/",{composer_id:{type:"String",required:true},action_id:{type:"String",required:true},object_id:{type:"String",required:true},target_id:{type:"String",required:true},is_timeline:{type:"Bool",defaultValue:false}});},null);
__d("XStickerPhotoEditorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/editor\/sticker_editor\/",{grid_id:{type:"String"},feedback_id:{type:"String"},target_type:{type:"Enum",required:true,enumType:1},photo_fbid:{type:"Int",required:true},latest_fbid:{type:"Int"},initial_tab:{type:"Enum",enumType:1}});},null);